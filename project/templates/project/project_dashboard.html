{% extends 'base.html' %}
{% load static %}
{% block title %}Project Dashboard{% endblock %}

{% block content %}
<div class="container py-4">

  <h2 class="mb-4 text-primary">Project Management Dashboard</h2>

  <!-- Add Buttons -->
  <div class="d-flex justify-content-start mb-3">
    <button type="button" class="btn btn-success me-2" data-bs-toggle="modal" data-bs-target="#addProjectModal">
      <i class="fa fa-plus-circle"></i> Add Project
    </button>
    <button type="button" class="btn btn-info me-2" data-bs-toggle="modal" data-bs-target="#addTaskModal">
      <i class="fa fa-tasks"></i> Add Task
    </button>
    
  </div>

  <!-- Filter Block (if activated in future) -->
  {% comment %} Optional filters {% endcomment %}
  {% include 'project/includes/filter_block.html' %}

  <!-- Projects List -->
  {% for project in projects %}
    {% include 'project/includes/project_card.html' with project=project %}
  {% empty %}
    <div class="alert alert-info">No projects available.</div>
  {% endfor %}

</div>

<!-- Modals -->
{% include 'project/includes/add_project_modal.html' %}
{% include 'project/includes/add_task_modal.html' %}

{% endblock %}

{% block scripts %}
  <script src="{% static 'js/project.js' %}"></script>
  <script src="{% static 'js/add_project_modal.js' %}"></script>
  {% if project_form.errors %}
  <script>
    const addProjectModal = new bootstrap.Modal(document.getElementById('addProjectModal'));
    addProjectModal.show();
  </script>
  {% endif %}
  {% if task_form.errors %}
  <script>
    const taskModal = new bootstrap.Modal(document.getElementById('addTaskModal'));
    taskModal.show();
  </script>
  {% endif %}
{% endblock %}
