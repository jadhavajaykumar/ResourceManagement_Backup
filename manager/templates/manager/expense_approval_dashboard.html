{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h3 class="text-primary mb-3">Manager - Expense Approvals</h3>

  <!-- Tabs -->
  <ul class="nav nav-tabs" id="approvalTabs" role="tablist">
	  <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#forwarded">Accountant Approved</a></li>
	  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#approved">Forwarded to Account Manager</a></li>
	  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#rejected">Rejected</a></li>
	  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#advances">Advance Requests</a></li>
  </ul>


  <!-- Tab Content -->
  <div class="tab-content mt-3">
    
    <!-- Submitted -->
    <div class="tab-pane fade show active" id="submitted">
      {% include 'manager/tabs/accountant_approved.html' %}
    </div>

    <!-- Approved -->
    <div class="tab-pane fade" id="approved">
      {% include 'manager/tabs/approved.html' %}
    </div>

    <!-- Rejected -->
    <div class="tab-pane fade" id="rejected">
      {% include 'manager/tabs/rejected.html' %}
    </div>

    <!-- Advance Requests -->
    <div class="tab-pane fade" id="advances">
      {% if advance_requests %}
      <table class="table table-bordered table-sm mt-2">
        <thead class="table-light">
          <tr>
            <th>Employee</th>
            <th>Amount</th>
            <th>Purpose</th>
            <th>Date Requested</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for adv in advance_requests %}
          <tr>
            <td>{{ adv.employee.user.get_full_name }}</td>
            <td>â‚¹{{ adv.amount }}</td>
            <td>{{ adv.purpose }}</td>
            <td>{{ adv.date_requested }}</td>
            <td>
              <a href="{% url 'manager:approve-advance' adv.id %}" class="btn btn-sm btn-success">Approve</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-muted mt-3">No advance requests pending.</p>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}
