{% extends "base.html" %}
{% load static %}

{% block title %}Timesheet Approvals{% endblock %}

{% block content %}
<h2 class="mb-4 text-primary">Timesheet Approvals</h2>

<div id="timesheet-table">
  {% include "manager/partials/timesheet_table_rows.html" %}
</div>

<script>
  function fetchTimesheets() {
    fetch("{% url 'manager:timesheet-approvals' %}", {
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    })
    .then(response => response.text())
    .then(html => {
      document.getElementById('timesheet-table').innerHTML = html;
    })
    .catch(error => console.error("AJAX fetch failed:", error));
  }

  // Auto-refresh every 60 seconds
  setInterval(fetchTimesheets, 60000);
</script>
{% endblock %}
