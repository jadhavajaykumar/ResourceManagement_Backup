{% extends "base.html" %}
{% load static %}

{% block title %}Expense Approvals{% endblock %}

{% block content %}
<h2 class="mb-4 text-primary">Expense Approvals</h2>

<div id="expense-table">
  {% include "manager/partials/expense_table_rows.html" %}
</div>

<script>
  function fetchExpenses() {
    fetch("{% url 'manager:expense-approvals' %}", {
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    })
    .then(response => response.text())
    .then(html => {
      document.getElementById('expense-table').innerHTML = html;
    })
    .catch(error => console.error("AJAX fetch failed:", error));
  }

  // Auto-refresh every 60 seconds
  setInterval(fetchExpenses, 60000);
</script>
{% endblock %}
